<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {%- seo -%}

  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="{{ "/assets/images/favicon.svg" | relative_url }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ "/assets/images/favicon-32x32.png" | relative_url }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ "/assets/images/favicon-16x16.png" | relative_url }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ "/assets/images/apple-touch-icon.png" | relative_url }}">
  <link rel="manifest" href="{{ "/site.webmanifest" | relative_url }}">

  <!-- Preconnect to external domains for faster resource loading -->
  <link rel="preconnect" href="https://res.cloudinary.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://www.gravatar.com" crossorigin>
  {% if site.google_fonts.enabled %}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  {% endif %}
  <link rel="dns-prefetch" href="https://res.cloudinary.com">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://www.gravatar.com">

  <!-- Critical CSS - Loaded synchronously for above-the-fold content -->
  <link rel="stylesheet" href="{{ "/assets/css/style.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/variables.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/layout.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/menu.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/cards.css" | relative_url }}">

  <!-- Non-critical CSS - Deferred loading -->
  <link rel="preload" href="{{ "/assets/css/post-layouts.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/embeds.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/tags.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/contact.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/footer.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/gallery.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/mobile-enhancements.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/breadcrumbs.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/back-to-top.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/code-blocks.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/featured-image.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/edit-links.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/google-fonts.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/page-headers.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/post-two-column.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ "/assets/css/site-description.css" | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">

  <!-- Fallback for browsers without JS -->
  <noscript>
    <link rel="stylesheet" href="{{ "/assets/css/post-layouts.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/embeds.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/tags.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/contact.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/footer.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/gallery.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/mobile-enhancements.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/breadcrumbs.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/back-to-top.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/code-blocks.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/featured-image.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/edit-links.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/google-fonts.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/page-headers.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/post-two-column.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/css/site-description.css" | relative_url }}">
  </noscript>

  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
  {%- endif -%}

  {% if site.google_fonts.enabled %}
  <!-- Google Fonts -->
  {% assign fonts_to_load = "" %}
  {% assign system_fonts = "Impact,Arial,Helvetica,Times,Times New Roman,Courier,Courier New,Verdana,Georgia,Palatino,Garamond,Bookman,Comic Sans MS,Trebuchet MS,Arial Black,Tahoma" | split: "," %}

  {% if site.google_fonts.body_font and site.google_fonts.body_font != "" %}
    {% assign is_system_font = false %}
    {% for sys_font in system_fonts %}
      {% if site.google_fonts.body_font == sys_font %}
        {% assign is_system_font = true %}
        {% break %}
      {% endif %}
    {% endfor %}
    {% unless is_system_font %}
      {% assign body_font_encoded = site.google_fonts.body_font | replace: " ", "+" %}
      {% assign fonts_to_load = fonts_to_load | append: "family=" | append: body_font_encoded | append: ":ital,wght@0,400;0,700;1,400;1,700" %}
    {% endunless %}
  {% endif %}

  {% if site.google_fonts.heading_font and site.google_fonts.heading_font != "" %}
    {% assign is_system_font = false %}
    {% for sys_font in system_fonts %}
      {% if site.google_fonts.heading_font == sys_font %}
        {% assign is_system_font = true %}
        {% break %}
      {% endif %}
    {% endfor %}
    {% unless is_system_font %}
      {% if fonts_to_load != "" %}{% assign fonts_to_load = fonts_to_load | append: "&" %}{% endif %}
      {% assign heading_font_encoded = site.google_fonts.heading_font | replace: " ", "+" %}
      {% assign fonts_to_load = fonts_to_load | append: "family=" | append: heading_font_encoded | append: ":wght@400;700" %}
    {% endunless %}
  {% endif %}

  {% if fonts_to_load != "" %}
  <link href="https://fonts.googleapis.com/css2?{{ fonts_to_load }}&display=swap" rel="stylesheet">
  {% endif %}
  {% endif %}

  <!-- Font Awesome - Deferred -->
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" as="style" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" onload="this.onload=null;this.rel='stylesheet'" />
  <noscript>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </noscript>

  <!-- Font optimization (font-display: swap) -->
  <link rel="stylesheet" href="{{ "/assets/css/font-optimization.css" | relative_url }}">

  <!-- GLightbox CSS - Deferred -->
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  </noscript>

  <!-- GLightbox JS - Deferred -->
  <script src="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/js/glightbox.min.js" crossorigin="anonymous" defer></script>

  <!-- Custom JavaScript -->
  <script src="{{ "/assets/js/lazy-cards.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/gallery-fix.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/embeds.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/menu.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/lightbox.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/back-to-top.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/code-copy.js" | relative_url }}" defer></script>

  <!-- Netlify Identity Widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <!-- Edit Links (must load after Netlify Identity) -->
  <script src="{{ "/assets/js/edit-links.js" | relative_url }}" defer></script>

  <!-- Structured Data -->
  {%- include structured-data.html -%}
</head>
