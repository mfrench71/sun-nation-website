<!-- Instagram Feed Widget -->
<div class="instagram-feed-container">
  <div class="instagram-feed-header">
    <h2>Follow Us on Instagram</h2>
  </div>

  <div id="instafeed" class="instagram-feed"></div>

  <div class="instagram-feed-footer">
    <a href="https://www.instagram.com/{{ site.instagram_username | default: 'sun_nation' }}/"
       target="_blank"
       rel="noopener noreferrer"
       class="instagram-follow-btn">
      Follow @{{ site.instagram_username | default: 'sun_nation' }}
    </a>
  </div>
</div>

<!-- Instafeed.js Library -->
<script src="https://cdn.jsdelivr.net/npm/instafeed.js@2.0.0/src/instafeed.min.js"></script>

<script>
  // Initialize Instagram feed
  // NOTE: You'll need to set up Instagram Basic Display API and get an access token
  // See: https://developers.facebook.com/docs/instagram-basic-display-api/getting-started

  const instagramAccessToken = '{{ site.instagram_access_token }}';

  if (instagramAccessToken && instagramAccessToken !== '') {
    const feed = new Instafeed({
      accessToken: instagramAccessToken,
      limit: 9,
      template: '<a href="{{link}}" target="_blank" rel="noopener noreferrer" class="instagram-post"><img src="{{image}}" alt="{{caption}}" loading="lazy" /></a>',
      resolution: 'standard_resolution',
      error: function(error) {
        console.error('Instagram feed error:', error);
        document.getElementById('instafeed').innerHTML = '<p class="instagram-error">Unable to load Instagram feed. Please check back later.</p>';
      }
    });

    feed.run();
  } else {
    // Show placeholder if no token configured
    document.getElementById('instafeed').innerHTML = `
      <div class="instagram-placeholder">
        <p>Instagram feed coming soon!</p>
        <p><a href="https://www.instagram.com/{{ site.instagram_username | default: 'sun_nation' }}/" target="_blank" rel="noopener noreferrer">Visit our Instagram â†’</a></p>
      </div>
    `;
  }
</script>

<style>
.instagram-feed-container {
  margin: 3rem 0;
}

.instagram-feed-header {
  text-align: center;
  margin-bottom: 2rem;
}

.instagram-feed-header h2 {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.instagram-feed {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.instagram-post {
  position: relative;
  display: block;
  overflow: hidden;
  border-radius: 8px;
  aspect-ratio: 1;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.instagram-post:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

.instagram-post img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.instagram-feed-footer {
  text-align: center;
}

.instagram-follow-btn {
  display: inline-block;
  padding: 0.75rem 2rem;
  background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
  color: white;
  text-decoration: none;
  border-radius: 25px;
  font-weight: 600;
  transition: transform 0.2s, box-shadow 0.2s;
}

.instagram-follow-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  color: white;
}

.instagram-placeholder,
.instagram-error {
  text-align: center;
  padding: 3rem 1rem;
  color: #666;
}

.instagram-placeholder a {
  color: #3498db;
  font-weight: 600;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .instagram-feed {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 0.5rem;
  }
}
</style>
