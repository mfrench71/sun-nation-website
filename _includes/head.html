<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {%- seo -%}

  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="{{ "/assets/images/favicon.svg" | relative_url }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ "/assets/images/favicon-32x32.png" | relative_url }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ "/assets/images/favicon-16x16.png" | relative_url }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ "/assets/images/apple-touch-icon.png" | relative_url }}">
  <link rel="manifest" href="{{ "/site.webmanifest" | relative_url }}">

  <!-- Preconnect to external domains for faster resource loading -->
  <link rel="preconnect" href="https://res.cloudinary.com" crossorigin>
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://www.gravatar.com" crossorigin>
  {% if site.google_fonts.enabled %}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  {% endif %}
  <link rel="dns-prefetch" href="https://res.cloudinary.com">
  <link rel="dns-prefetch" href="https://unpkg.com">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://www.gravatar.com">

  <!-- Theme CSS (loads first) -->
  <link rel="stylesheet" href="{{ "/assets/css/style.css" | relative_url }}">

  <!-- Custom CSS (loads after theme - higher priority) -->
  <link rel="stylesheet" href="{{ "/assets/css/variables.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/layout.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/cards.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/post-layouts.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/menu.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/embeds.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/tags.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/contact.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/footer.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/gallery.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/mobile-enhancements.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/breadcrumbs.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/back-to-top.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/code-blocks.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/featured-image.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/edit-links.css" | relative_url }}">
  <link rel="stylesheet" href="{{ "/assets/css/google-fonts.css" | relative_url }}">

  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
  {%- endif -%}

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>

  {% if site.google_fonts.enabled %}
  <!-- Google Fonts -->
  {% assign fonts_to_load = "" %}
  {% if site.google_fonts.body_font and site.google_fonts.body_font != "" %}
    {% assign fonts_to_load = fonts_to_load | append: "family=" | append: site.google_fonts.body_font | append: ":ital,wght@0,400;0,700;1,400;1,700" %}
  {% endif %}
  {% if site.google_fonts.heading_font and site.google_fonts.heading_font != "" %}
    {% if fonts_to_load != "" %}{% assign fonts_to_load = fonts_to_load | append: "&" %}{% endif %}
    {% assign fonts_to_load = fonts_to_load | append: "family=" | append: site.google_fonts.heading_font | append: ":wght@400;700" %}
  {% endif %}
  {% if fonts_to_load != "" %}
  <link href="https://fonts.googleapis.com/css2?{{ fonts_to_load }}&display=swap" rel="stylesheet">
  {% endif %}
  {% endif %}

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Font optimization (font-display: swap) -->
  <link rel="stylesheet" href="{{ "/assets/css/font-optimization.css" | relative_url }}">

  <!-- GLightbox CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">

  <!-- Highlight.js for syntax highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>
    // Configure Highlight.js to ignore unescaped HTML warning
    // Kramdown escapes HTML in code blocks automatically
    document.addEventListener('DOMContentLoaded', function() {
      hljs.configure({ ignoreUnescapedHTML: true });
      hljs.highlightAll();
    });
  </script>

  <!-- GLightbox JS (load synchronously before our custom script) -->
  <script src="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/js/glightbox.min.js" crossorigin="anonymous"></script>

  <!-- Custom JavaScript -->
  <script src="{{ "/assets/js/lazy-cards.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/gallery-fix.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/embeds.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/menu.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/lightbox.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/back-to-top.js" | relative_url }}" defer></script>
  <script src="{{ "/assets/js/code-copy.js" | relative_url }}" defer></script>

  <!-- Netlify Identity Widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <!-- Edit Links (must load after Netlify Identity) -->
  <script src="{{ "/assets/js/edit-links.js" | relative_url }}" defer></script>

  <!-- Structured Data -->
  {%- include structured-data.html -%}
</head>
